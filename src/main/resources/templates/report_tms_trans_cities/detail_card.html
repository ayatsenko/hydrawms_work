<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<span th:fragment="report_tms_trans_cities_detail_body" th:remove="tag">
        <div><table id="table-report-tms-trans-cities-detail" class="table table-striped table-sm table-bordered" cellspacing="0" style="width:100%;"></table></div>
</span>

<script th:fragment="cardscript" th:inline="javascript">
    var clm_id_width, cnt_id_width, cnt_name_width, user_id_width, user_surname_width, clm_count_width, start_date_width, start_city_width, end_date_width, end_city_width, start_curr_width,
            start_sum_width, end_curr_width, end_sum_width, profit_sum_width;
    var clm_id_class, cnt_id_class, cnt_name_class, user_id_class, user_surname_class, clm_count_class, start_date_class, start_city_class, end_date_class, end_city_class, start_curr_class,
            start_sum_class, end_curr_class, end_sum_class, profit_sum_class;

    var smallScreenSize = window.screen.width > 1024 && window.screen.height <= 768;
    var mobileScreenSize = window.screen.width < 1024 && window.screen.height < 768;

    if(mobileScreenSize){
        vDomParam = "Blfrtp";

        user_id_width = "";
        user_id_class = "none";

        user_name_width = "20%";
        user_name_class = "all small_size small_head_size small_footer_size";

        user_surname_width = "";
        user_surname_class = "none";
    }
    else if(smallScreenSize){
            vDomParam = "Blfrtip";
            cnt_id_width = "3%";
            cnt_id_class = "small_size small_head_size small_footer_size";
            cnt_name_width = "42%";
            cnt_name_class = "small_size small_head_size small_footer_size";
            user_id_width = "";
            user_id_class = "none";
            user_surname_width = "10%";
            user_surname_class = "small_size small_head_size small_footer_size";
            clm_count_width = "5%";
            clm_count_class = "small_size small_head_size small_footer_size text-center";
            cities_980_width = "5%";
            cities_980_class = "small_size small_head_size small_footer_size text-center";
            cities_840_width = "5%";
            cities_840_class = "small_size small_head_size small_footer_size text-center";
            cities_978_width = "5%";
            cities_978_class = "small_size small_head_size small_footer_size text-center";
            cities_643_width = "5%";
            cities_643_class = "small_size small_head_size small_footer_size text-center";
            add_980_width = "5%";
            add_980_class = "small_size small_head_size small_footer_size text-center";
            add_840_width = "5%";
            add_840_class = "small_size small_head_size small_footer_size text-center";
            add_978_width = "5%";
            add_978_class = "small_size small_head_size small_footer_size text-center";
            add_643_width = "5%";
            add_643_class = "small_size small_head_size small_footer_size text-center";

            empty_column_width = "5%";
            empty_column_class = "small_size small_head_size small_footer_size text-center";
    }
    else{
            vDomParam = "Blfrtip";

            clm_id_width = "3%";
            clm_id_class = "";
            cnt_id_width = "";
            cnt_id_class = "none";
            cnt_name_width = "20%";
            cnt_name_class = "";
            user_id_width = "";
            user_id_class = "none";
            user_surname_width = "16%";
            user_surname_class = "";

            start_date_width = "5%";
            start_date_class = "text-center";
            start_city_width = "15%";
            start_city_class = "";
            end_date_width = "5%";
            end_date_class = "text-center";
            end_city_width = "15%";
            end_city_class = "";
            start_curr_width = "3%";
            start_curr_class = "text-center";
            start_sum_width = "5%";
            start_sum_class = "text-center";
            end_curr_width = "3%";
            end_curr_class = "text-center";
            end_sum_width = "5%";
            end_sum_class = "text-center";
            profit_sum_width = "5%";
            profit_sum_class = "text-center";
    }

    var vReportTMSTransCitiesDetailValue;
    vReportTMSTransCitiesDetailValue = {
        table : '#table-report-tms-trans-cities-detail',
        button_form: "#table-report-tms-trans-cities-buttons",
        ajax : {
            "url": /*[[@{/report_tms_trans_cities/get_detail_table}]]*/ "report_tms_trans_cities/get_detail_table",
            "type": "post",
            "data": function ( d ) {
                d.start_date = vReportTMSTransCitiesDetailValue.rowdata.start_date;
                d.end_date = vReportTMSTransCitiesDetailValue.rowdata.end_date;
                d.req_cnt_id = vReportTMSTransCitiesDetailValue.rowdata.req_cnt_id;
                d.req_user_id = vReportTMSTransCitiesDetailValue.rowdata.req_user_id;
            }
        },
        key : "cnt_id",
        switchControl : report_tms_trans_cities_detail_switchControl,
        rowdata:{
            cnt_id: null,
            start_date: null,
            end_date: null,
            req_cnt_id: null,
            ser_id: null,
            req_id: null
        },
        ordering: true,
        order: [
            [4, "desc"]
        ],

        dom: 'Blfrtip',
        createdRow: function(row, data, index) {
            if(data["cnt_id"] === 0){
                $(row).css('background-color','#d5e1df');
                $(row).addClass("font-weight-bold");
            }
        },
        columnDefs: [
            { "targets": [10,12,13],  render: $.fn.dataTable.render.number( '\ ', '.', 2, '' )}
        ],
        columns : [
                /*0*/{"title": /*[[#{report_tms_trans_cities.detail.clm_id}]]*/ "clm_id", "data": "clm_id", "width": clm_id_width, "className": clm_id_class},
                /*1*/{"title": /*[[#{report_tms_trans_cities.detail.cnt_id}]]*/ "cnt_id", "data": "cnt_id", "width": cnt_id_width, "className": cnt_id_class},
                /*2*/{"title": /*[[#{report_tms_trans_cities.detail.cnt_name}]]*/ "cnt_name", "data": "cnt_name", "width": cnt_name_width, "className": cnt_name_class},
                /*3*/{"title": /*[[#{report_tms_trans_cities.detail.user_id}]]*/ "user_id", "data": "user_id", "width": user_id_width, "className": user_id_class},
                /*4*/{"title": /*[[#{report_tms_trans_cities.detail.user_surname}]]*/ "user_surname", "data": "user_surname", "width": user_surname_width, "className": user_surname_class},
                /*5*/{"title": /*[[#{report_tms_trans_cities.detail.start_date}]]*/ "start_date", "data": "start_date", "width": start_date_width, "className": start_date_class},
                /*6*/{"title": /*[[#{report_tms_trans_cities.detail.start_city}]]*/ "start_city", "data": "start_city", "width": start_city_width, "className": start_city_class},
                /*7*/{"title": /*[[#{report_tms_trans_cities.detail.end_date}]]*/ "end_date", "data": "end_date", "width": end_date_width, "className": end_date_class},
                /*8*/{"title": /*[[#{report_tms_trans_cities.detail.end_city}]]*/ "end_city", "data": "end_city", "width": end_city_width, "className": end_city_class},
                /*9*/{"title": /*[[#{report_tms_trans_cities.detail.start_curr}]]*/ "start_curr", "data": "start_curr", "width": start_curr_width, "className": start_curr_class},
                /*10*/{"title": /*[[#{report_tms_trans_cities.detail.start_sum}]]*/ "start_sum", "data": "start_sum", "width": start_sum_width, "className": start_sum_class},
                /*11*/{"title": /*[[#{report_tms_trans_cities.detail.end_curr}]]*/ "end_curr", "data": "end_curr", "width": end_curr_width, "className": end_curr_class},
                /*12*/{"title": /*[[#{report_tms_trans_cities.detail.end_sum}]]*/ "end_sum", "data": "end_sum", "width": end_sum_width, "className": end_sum_class},
                /*13*/{"title": /*[[#{report_tms_trans_cities.detail.profit_sum}]]*/ "profit_sum", "data": "profit_sum", "width": profit_sum_width, "className": profit_sum_width}
        ],
        pageLength: 25,
        copy_button: true,
        excel_button: true,
        pdf_button: true,
        print_button: true
    };

    function report_tms_trans_cities_detail_switchControl(){
    }

    $('.report_tms_trans_cities_detail_link_control').on('click', function (){
        $("#report-tms-trans-cities-detail-link-form input[name=req_id]").val(vReportTMSTransCitiesDetailValue.rowdata.req_id);

        $("#report-tms-trans-cities-detail-link-form input[name=tenders_list_table_order_column]").val(0);
        $("#report-tms-trans-cities-detail-link-form input[name=tenders_list_table_order_type]").val("desc");
        $("#report-tms-trans-cities-detail-link-form input[name=tenders_list_table_search]").val(vReportTMSTransCitiesDetailValue.rowdata.req_id);
        $("#report-tms-trans-cities-detail-link-form input[name=tenders_list_table_pagelen]").val(25);
        $("#report-tms-trans-cities-detail-link-form input[name=tenders_list_table_page]").val(0);
    });

    $('.positions_btn_control').on('click', function (){
        $("#positions-detail input[name=mode]").val($(this).attr("mode"));
    });

    $(document).ready(function(){
        vReportTMSTransCitiesDetailValue.rowdata.start_date = null;
        vReportTMSTransCitiesDetailValue.rowdata.end_date = null;
        vReportTMSTransCitiesDetailValue.rowdata.req_cnt_id = null;
        vReportTMSTransCitiesDetailValue.rowdata.req_user_id = null;

        recreateDataTable(vReportTMSTransCitiesDetailValue);
    });
</script>

</body>
</html>