<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<span th:fragment="users_kpi_list_body" th:remove="tag">
        <form id="users-kpi-list-detail" class="mb-2" th:action="@{/users_kpi/list_detail}" method="post">
            <input name="mode" value="0" hidden>
              <div id="users-kpi-list-detailbtn-large" class="d-none d-sm-block">
                 <button type="submit" id="users-kpi-list-detailbtn" class="btn btn-sm btn-dark users_kpi_list_btn_control" th:text="#{general.detailbtn}" th:attr="mode=4" disabled>View</button>
                 <button type="submit" id="users-kpi-list-editbtn" class="btn btn-sm btn-dark users_kpi_list_btn_control" th:text="#{general.editbtn}" th:attr="mode=1" disabled>Edit</button>
                 <button type="submit" id="users-kpi-list-delbtn" class="btn btn-sm btn-dark users_kpi_list_btn_control" th:text="#{general.delbtn}" th:attr="mode=2" disabled>Delete</button>
              </div>
              <div id="users-kpi-list-detailbtn-small" class="d-block d-sm-none">
                 <button type="submit" id="users-kpi-list-detailbtn-sx" class="btn btn-sm btn-dark users_kpi_list_btn_control" th:attr="mode=4" disabled><i data-feather="list"></i></button>
                 <button type="submit" id="users-kpi-list-editbtn-sx" class="btn btn-sm btn-dark users_kpi_list_btn_control" th:attr="mode=1" disabled><i data-feather="edit-2"></i></button>
                 <button type="submit" id="users-kpi-list-delbtn-sx" class="btn btn-sm btn-dark users_kpi_list_btn_control" th:attr="mode=2" disabled><i data-feather="trash-2"></i></button>
              </div>
        </form>

        <div><table id="table-users-kpi-list" class="table table-striped table-sm table-bordered" cellspacing="0" style="width:100%;"></table></div>
</span>

<script th:fragment="cardscript" th:inline="javascript">
    var user_id_width, user_surname_width, meets_plan_width, meets_fact_width, meets_result_width, meets_percent_width, meets_color_width, calls_plan_width, calls_fact_width, calls_result_width,
        calls_percent_width, calls_color_width, req_plan_width, req_fact_width, req_result_width, req_percent_width, req_color_width, fin_plan_width, fin_fact_width, fin_result_width,
        fin_percent_width, fin_color_width;

    var user_id_class, user_surname_class, meets_plan_class, meets_fact_class, meets_result_class, meets_percent_class, meets_color_class, calls_plan_class, calls_fact_class, calls_result_class,
        calls_percent_class, calls_color_class, req_plan_class, req_fact_class, req_result_class, req_percent_class, req_color_class, fin_plan_class, fin_fact_class, fin_result_class,
        fin_percent_class, fin_color_class;

    var mobileScreenSize = window.screen.width < 1024 && window.screen.height < 768;
    var smallScreenSize = window.screen.width > 1024 && window.screen.height <= 768;

    if(mobileScreenSize){
        vDomParam = "Blfrtip";
        user_id_width = "";
        user_id_class = "none";
        user_surname_width = "60%";
        user_surname_class = "small_size small_head_size small_footer_size head-center";

        meets_plan_width = "5%";
        meets_plan_class = "min-tablet-p small_size small_head_size small_footer_size head-center head-grey text-center";
        meets_fact_width = "5%";
        meets_fact_class = "min-tablet-p small_size small_head_size small_footer_size head-center head-grey th-border-black text-center";
        meets_result_width = "";
        meets_result_class = "none";
        meets_percent_width = "";
        meets_percent_class = "none";
        meets_color_width = "";
        meets_color_class = "none";

        calls_plan_width = "5%";
        calls_plan_class = "min-tablet-p small_size small_head_size small_footer_size head-center head-yellow text-center";
        calls_fact_width = "5%";
        calls_fact_class = "min-tablet-p small_size small_head_size small_footer_size head-center head-yellow th-border-black text-center";
        calls_result_width = "";
        calls_result_class = "none";
        calls_percent_width = "";
        calls_percent_class = "none";
        calls_color_width = "";
        calls_color_class = "none";

        req_plan_width = "5%";
        req_plan_class = "min-tablet-p small_size small_head_size small_footer_size head-center head-brown text-center";
        req_fact_width = "5%";
        req_fact_class = "small_size small_head_size small_footer_size head-center head-brown th-border-black text-center";
        req_result_width = "";
        req_result_class = "none";
        req_percent_width = "";
        req_percent_class = "none";
        req_color_width = "";
        req_color_class = "none";

        fin_plan_width = "5%";
        fin_plan_class = "min-tablet-p small_size small_head_size small_footer_size head-center head-blue text-center";
        fin_fact_width = "5%";
        fin_fact_class = "small_size small_head_size small_footer_size head-center head-blue th-border-black text-center";
        fin_result_width = "";
        fin_result_class = "none";
        fin_percent_width = "";
        fin_percent_class = "none";
        fin_color_width = "";
        fin_color_class = "none";
    }
    else if(smallScreenSize){
        vDomParam = "Blfrtip";
        user_id_width = "";
        user_id_class = "none";
        user_surname_width = "28%";
        user_surname_class = "small_size small_head_size small_footer_size head-center";
        meets_plan_width = "5%";
        meets_plan_class = "small_size small_head_size small_footer_size head-center head-grey text-center";
        meets_fact_width = "5%";
        meets_fact_class = "small_size small_head_size small_footer_size head-center head-grey text-center";
        meets_result_width = "5%";
        meets_result_class = "small_size small_head_size small_footer_size head-center head-grey text-center";
        meets_percent_width = "3%";
        meets_percent_class = "small_size small_head_size small_footer_size head-center head-grey th-border-black text-center";
        meets_color_width = "";
        meets_color_class = "none";
        calls_plan_width = "5%";
        calls_plan_class = "small_size small_head_size small_footer_size head-center head-yellow text-center";
        calls_fact_width = "5%";
        calls_fact_class = "small_size small_head_size small_footer_size head-center head-yellow text-center";
        calls_result_width = "5%";
        calls_result_class = "small_size small_head_size small_footer_size head-center head-yellow text-center";
        calls_percent_width = "3%";
        calls_percent_class = "small_size small_head_size small_footer_size head-center head-yellow th-border-black text-center";
        calls_color_width = "";
        calls_color_class = "none";
        req_plan_width = "5%";
        req_plan_class = "small_size small_head_size small_footer_size head-center head-brown text-center";
        req_fact_width = "5%";
        req_fact_class = "small_size small_head_size small_footer_size head-center head-brown text-center";
        req_result_width = "5%";
        req_result_class = "small_size small_head_size small_footer_size head-center head-brown text-center";
        req_percent_width = "3%";
        req_percent_class = "small_size small_head_size small_footer_size head-center head-brown th-border-black text-center";
        req_color_width = "";
        req_color_class = "none";
        fin_plan_width = "5%";
        fin_plan_class = "small_size small_head_size small_footer_size head-center head-blue text-center";
        fin_fact_width = "5%";
        fin_fact_class = "small_size small_head_size small_footer_size head-center head-blue text-center";
        fin_result_width = "5%";
        fin_result_class = "small_size small_head_size small_footer_size head-center head-blue text-center";
        fin_percent_width = "3%";
        fin_percent_class = "small_size small_head_size small_footer_size head-center head-blue th-border-black text-center";
        fin_color_width = "";
        fin_color_class = "none";
    }
    else{
        vDomParam = "Blfrtip";
        user_id_width = "";
        user_id_class = "none";
        user_surname_width = "28%";
        user_surname_class = "head-center";
        meets_plan_width = "5%";
        meets_plan_class = "head-center head-grey text-center";
        meets_fact_width = "5%";
        meets_fact_class = "head-center head-grey text-center";
        meets_result_width = "5%";
        meets_result_class = "head-center head-grey text-center";
        meets_percent_width = "3%";
        meets_percent_class = "head-center head-grey th-border-black text-center";
        meets_color_width = "";
        meets_color_class = "none";
        calls_plan_width = "5%";
        calls_plan_class = "head-center head-yellow text-center";
        calls_fact_width = "5%";
        calls_fact_class = "head-center head-yellow text-center";
        calls_result_width = "5%";
        calls_result_class = "head-center head-yellow text-center";
        calls_percent_width = "3%";
        calls_percent_class = "head-center head-yellow th-border-black text-center";
        calls_color_width = "";
        calls_color_class = "none";
        req_plan_width = "5%";
        req_plan_class = "head-center head-brown text-center";
        req_fact_width = "5%";
        req_fact_class = "head-center head-brown text-center";
        req_result_width = "5%";
        req_result_class = "head-center head-brown text-center";
        req_percent_width = "3%";
        req_percent_class = "head-center head-brown th-border-black text-center";
        req_color_width = "";
        req_color_class = "none";
        fin_plan_width = "5%";
        fin_plan_class = "head-center head-blue text-center";
        fin_fact_width = "5%";
        fin_fact_class = "head-center head-blue text-center";
        fin_result_width = "5%";
        fin_result_class = "head-center head-blue text-center";
        fin_percent_width = "3%";
        fin_percent_class = "head-center head-blue th-border-black text-center";
        fin_color_width = "";
        fin_color_class = "none";
    }

    var vUsersKPIListValue;
    vUsersKPIListValue = {
        table : '#table-users-kpi-list',
        button_form: '#users-kpi-list-detail',
        ajax : {
            "url": /*[[@{/users_kpi/get_list_table}]]*/ "users_kpi/get_list_table",
            "type": "post",
            "data": function ( d ) {
                d.users_kpi_year = vUsersKPIListValue.rowdata.users_kpi_year;
                d.users_kpi_month = vUsersKPIListValue.rowdata.users_kpi_month;
            }
        },
        key : "user_id",
        switchControl : users_kpi_list_switchControl,
        rowdata:{
           user_id: null,
           users_kpi_year: null,
           users_kpi_month: null
        },
        ordering: true,
        order: [
            [1, "asc"]
        ],

        dom: 'Blfrtip',
        createdRow: function( row, data, dataIndex ) {
            $(row).find('td:eq(4)').css('background-color', data["meets_color"]);
            $(row).find('td:eq(5)').css('background-color', data["meets_color"]);

            $(row).find('td:eq(9)').css('background-color', data["calls_color"]);
            $(row).find('td:eq(10)').css('background-color', data["calls_color"]);

            $(row).find('td:eq(14)').css('background-color', data["req_color"]);
            $(row).find('td:eq(15)').css('background-color', data["req_color"]);

            $(row).find('td:eq(19)').css('background-color', data["fin_color"]);
            $(row).find('td:eq(20)').css('background-color', data["fin_color"]);
        },
        columnDefs:[
            {"targets": [17], render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [18], render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [19], render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )}
        ],
        columns : [
                /*0*/{"title": /*[[#{users_kpi.list.user_id}]]*/ "user_id", "data": "user_id", "width": user_id_width, "className": user_id_class},
                /*1*/{"title": /*[[#{users_kpi.list.user_surname}]]*/ "user_surname", "data": "user_surname", "width": user_surname_width, "className": user_surname_class},

                /*2*/{"title": /*[[#{users_kpi.list.meets_plan}]]*/ "meets_plan", "data": "meets_plan", "width": meets_plan_width, "className": meets_plan_class},
                /*3*/{"title": /*[[#{users_kpi.list.meets_fact}]]*/ "meets_fact", "data": "meets_fact", "width": meets_fact_width, "className": meets_fact_class},
                /*4*/{"title": /*[[#{users_kpi.list.meets_result}]]*/ "meets_result", "data": "meets_result", "width": meets_result_width, "className": meets_result_class},
                /*5*/{"title": /*[[#{users_kpi.list.meets_percent}]]*/ "meets_percent", "data": "meets_percent", "width": meets_percent_width, "className": meets_percent_class},
                /*6*/{"title": /*[[#{users_kpi.list.meets_color}]]*/ "meets_color", "data": "meets_color", "width": meets_color_width, "className": meets_color_class},

                /*7*/{"title": /*[[#{users_kpi.list.calls_plan}]]*/ "calls_plan", "data": "calls_plan", "width": calls_plan_width, "className": calls_plan_class},
                /*8*/{"title": /*[[#{users_kpi.list.calls_fact}]]*/ "calls_fact", "data": "calls_fact", "width": calls_fact_width, "className": calls_fact_class},
                /*9*/{"title": /*[[#{users_kpi.list.calls_result}]]*/ "calls_result", "data": "calls_result", "width": calls_result_width, "className": calls_result_class},
                /*10*/{"title": /*[[#{users_kpi.list.calls_percent}]]*/ "calls_percent", "data": "calls_percent", "width": calls_percent_width, "className": calls_percent_class},
                /*11*/{"title": /*[[#{users_kpi.list.calls_color}]]*/ "calls_color", "data": "calls_color", "width": calls_color_width, "className": calls_color_class},

                /*12*/{"title": /*[[#{users_kpi.list.req_plan}]]*/ "req_plan", "data": "req_plan", "width": req_plan_width, "className": req_plan_class},
                /*13*/{"title": /*[[#{users_kpi.list.req_fact}]]*/ "req_fact", "data": "req_fact", "width": req_fact_width, "className": req_fact_class},
                /*14*/{"title": /*[[#{users_kpi.list.req_result}]]*/ "req_result", "data": "req_result", "width": req_result_width, "className": req_result_class},
                /*15*/{"title": /*[[#{users_kpi.list.req_percent}]]*/ "req_percent", "data": "req_percent", "width": req_percent_width, "className": req_percent_class},
                /*16*/{"title": /*[[#{users_kpi.list.req_color}]]*/ "req_color", "data": "req_color", "width": req_color_width, "className": req_color_class},

                /*17*/{"title": /*[[#{users_kpi.list.fin_plan}]]*/ "fin_plan", "data": "fin_plan", "width": fin_plan_width, "className": fin_plan_class},
                /*18*/{"title": /*[[#{users_kpi.list.fin_fact}]]*/ "fin_fact", "data": "fin_fact", "width": fin_fact_width, "className": fin_fact_class},
                /*19*/{"title": /*[[#{users_kpi.list.fin_result}]]*/ "fin_result", "data": "fin_result", "width": fin_result_width, "className": fin_result_class},
                /*20*/{"title": /*[[#{users_kpi.list.fin_percent}]]*/ "fin_percent", "data": "fin_percent", "width": fin_percent_width, "className": fin_percent_class},
                /*21*/{"title": /*[[#{users_kpi.list.fin_color}]]*/ "fin_color", "data": "fin_color", "width": fin_color_width, "className": fin_color_class}
        ],
        pageLength: 25,
        copy_button: true,
        excel_button: true,
        pdf_button: true,
        print_button: true
    };

    var RoleAdminString = /*[[ ${#authorization.expression('hasRole("ROLE_ADMIN")')} ]]*/ null;
    var RoleGMString = /*[[ ${#authorization.expression('hasRole("ROLE_GM")')} ]]*/ null;
    var RoleSaleDirString = /*[[ ${#authorization.expression('hasRole("ROLE_SALEDIR")')} ]]*/ null;

    function users_kpi_list_switchControl(){
        if(vUsersKPIListValue.rowdata.user_id != null){
            if(RoleAdminString === true || RoleGMString === true || RoleSaleDirString === true) {
                $("#users-kpi-list-editbtn").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
                $("#users-kpi-list-delbtn").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');

                $("#users-kpi-list-detailbtn-sx").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
                $("#users-kpi-list-editbtn-sx").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
                $("#users-kpi-list-delbtn-sx").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
            }else{
                $("#users-kpi-list-editbtn").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
                $("#users-kpi-list-delbtn").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');

                $("#users-kpi-list-editbtn-sx").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
                $("#users-kpi-list-delbtn-sx").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
            }
            $("#users-kpi-list-detailbtn").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');

            $("#users-kpi-list-detailbtn-sx").prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
<!-- List Buttons -->
                vUserKpiMeetsValue.rowdata.user_id = vUsersKPIListValue.rowdata.user_id;
                vUserKpiMeetsValue.rowdata.users_kpi_year = $("#users_kpi_year").val();
                vUserKpiMeetsValue.rowdata.users_kpi_month = $("#users_kpi_month").val();
                $(vUserKpiMeetsValue.table).DataTable().ajax.reload();
<!-- Meetings -->
                vUserKpiCallsValue.rowdata.user_id = vUsersKPIListValue.rowdata.user_id;
                vUserKpiCallsValue.rowdata.users_kpi_year = $("#users_kpi_year").val();
                vUserKpiCallsValue.rowdata.users_kpi_month = $("#users_kpi_month").val();
                $(vUserKpiCallsValue.table).DataTable().ajax.reload();
<!-- Calls -->
                vUserKpiRequestsValue.rowdata.user_id = vUsersKPIListValue.rowdata.user_id;
                vUserKpiRequestsValue.rowdata.users_kpi_year = $("#users_kpi_year").val();
                vUserKpiRequestsValue.rowdata.users_kpi_month = $("#users_kpi_month").val();
                $(vUserKpiRequestsValue.table).DataTable().ajax.reload();
<!-- Requests -->
                vUserKpiTendersValue.rowdata.user_id = vUsersKPIListValue.rowdata.user_id;
                vUserKpiTendersValue.rowdata.users_kpi_year = $("#users_kpi_year").val();
                vUserKpiTendersValue.rowdata.users_kpi_month = $("#users_kpi_month").val();
                $(vUserKpiTendersValue.table).DataTable().ajax.reload();
<!-- Tenders -->
                vUserKpiFinanceValue.rowdata.user_id = vUsersKPIListValue.rowdata.user_id;
                vUserKpiFinanceValue.rowdata.users_kpi_year = $("#users_kpi_year").val();
                vUserKpiFinanceValue.rowdata.users_kpi_month = $("#users_kpi_month").val();
                $(vUserKpiFinanceValue.table).DataTable().ajax.reload();
<!-- Finance -->
        } else{
                $("#users-kpi-list-detailbtn").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
                $("#users-kpi-list-editbtn").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
                $("#users-kpi-list-delbtn").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');

                $("#users-kpi-list-detailbtn-sx").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
                $("#users-kpi-list-editbtn-sx").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
                $("#users-kpi-list-delbtn-sx").prop('disabled',true).addClass('btn-dark').removeClass('btn-primary');
<!-- List Buttons -->
                vUserKpiMeetsValue.rowdata.user_id = null;
                vUserKpiMeetsValue.rowdata.users_kpi_year = null;
                vUserKpiMeetsValue.rowdata.users_kpi_month = null;
                $(vUserKpiMeetsValue.table).DataTable().clear().draw();
<!-- Meetings -->
                vUserKpiCallsValue.rowdata.user_id = null;
                vUserKpiCallsValue.rowdata.users_kpi_year = null;
                vUserKpiCallsValue.rowdata.users_kpi_month = null;
                $(vUserKpiCallsValue.table).DataTable().clear().draw();
<!-- Calls -->
                vUserKpiRequestsValue.rowdata.user_id = null;
                vUserKpiRequestsValue.rowdata.users_kpi_year = null;
                vUserKpiRequestsValue.rowdata.users_kpi_month = null;
                $(vUserKpiRequestsValue.table).DataTable().clear().draw();
<!-- Requests -->
                vUserKpiTendersValue.rowdata.user_id = null;
                vUserKpiTendersValue.rowdata.users_kpi_year = null;
                vUserKpiTendersValue.rowdata.users_kpi_month = null;
                $(vUserKpiTendersValue.table).DataTable().clear().draw();
<!-- Tenders -->
                vUserKpiFinanceValue.rowdata.user_id = null;
                vUserKpiFinanceValue.rowdata.users_kpi_year = null;
                vUserKpiFinanceValue.rowdata.users_kpi_month = null;
                $(vUserKpiFinanceValue.table).DataTable().clear().draw();
<!-- Finance -->
        }
    }

    $('.users_kpi_list_btn_control').on('click', function (){
        $("#users-kpi-list-detail input[name=mode]").val($(this).attr("mode"));
    });

    $('#users-kpi-list-detail').submit(function() {
        vUsersKPIListValue.rowdata.users_kpi_list_table_order_column = $(vUsersKPIListValue.table).DataTable().order()[0][0];
        vUsersKPIListValue.rowdata.users_kpi_list_table_order_type = $(vUsersKPIListValue.table).DataTable().order()[0][1];
        vUsersKPIListValue.rowdata.users_kpi_list_table_search = $(vUsersKPIListValue.table).DataTable().search();
        vUsersKPIListValue.rowdata.users_kpi_list_table_pagelen = $(vUsersKPIListValue.table).DataTable().page.len();
        vUsersKPIListValue.rowdata.users_kpi_list_table_page = $(vUsersKPIListValue.table).DataTable().page.info().page;
        <!-- Recreate Contragent Ajax Filter Value -->

        vUsersKPIListValue.rowdata.users_kpi_year = $("#users_kpi_year").val();
        vUsersKPIListValue.rowdata.users_kpi_month = $("#users_kpi_month").val();

        Object.keys(vUsersKPIListValue.rowdata).forEach(function (index) {
            $("#users-kpi-list-detail").append("<input name=\"" + index + "\" hidden>");
            $("#users-kpi-list-detail input[name=\"" + index + "\"]").val(vUsersKPIListValue.rowdata[index]);
        });
    });

    $(document).ready(function(){
        vUsersKPIListValue.rowdata.user_id = /*[[${user_id}]]*/ null;
        vUsersKPIListValue.rowdata.users_kpi_year = /*[[${users_kpi_year}]]*/ null;
        vUsersKPIListValue.rowdata.users_kpi_month = /*[[${users_kpi_month}]]*/ null;

        vUsersKPIListValue.rowdata.table_order_column = /*[[${table_order_column}]]*/ null;
        vUsersKPIListValue.rowdata.table_order_type = /*[[${table_order_type}]]*/ null;
        vUsersKPIListValue.rowdata.table_search = /*[[${table_search}]]*/ null;
        vUsersKPIListValue.rowdata.table_pagelen = /*[[${table_pagelen}]]*/ null;
        vUsersKPIListValue.rowdata.table_page = /*[[${table_page}]]*/ null;

        recreateDataTable(vUsersKPIListValue);
        var vMeetsName = /*[[#{users_kpi.list.meets_category}]]*/ null;
        var vCallsName = /*[[#{users_kpi.list.calls_category}]]*/ null;
        var vReqName = /*[[#{users_kpi.list.req_category}]]*/ null;
        var vFinName = /*[[#{users_kpi.list.fin_category}]]*/ null;

        if (!mobileScreenSize) {
            $("#table-users-kpi-list thead tr:first").before(
                '<tr role="row">' +
                '<th></th>' +
                '<th colspan="4" class="text-center th-grey th-border-black">' + vMeetsName + '</th>' +
                '<th colspan="4" class="text-center th-yellow th-border-black">' + vCallsName + '</th>' +
                '<th colspan="4" class="text-center th-brown th-border-black">' + vReqName + '</th>' +
                '<th colspan="4" class="text-center th-blue th-border-black">' + vFinName + '</th>' +
                '</tr>');
        }
        else{
            var currentTable = $('#table-users-kpi-list').DataTable();
            var meet_header = currentTable.columns(3).header();
            $(meet_header).html('Встречи');
            var call_header = currentTable.columns(8).header();
            $(call_header).html('Звонки');
            var req_header = currentTable.columns(13).header();
            $(req_header).html('Запр.');
            var fin_header = currentTable.columns(18).header();
            $(fin_header).html('Доход');
        }
    });
</script>

</body>
</html>