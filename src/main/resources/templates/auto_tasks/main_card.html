<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<span th:fragment="auto_tasks_main_body" th:remove="tag">     
        <div><table id="table-auto-tasks" class="table table-striped table-sm table-bordered" cellspacing="0" style="width:100%;"></table></div>
</span>

<script th:fragment="cardscript" th:inline="javascript">
        var se_id_show, set_id_show, set_sname_show, se_create_show, se_state_show, se_state_color_show, se_fk_id_show, se_error_show;
        var se_id_width, set_id_width, set_sname_width, se_create_width, se_state_width, se_state_color_width, se_fk_id_width, se_error_width;
        var se_id_class, set_id_class, set_sname_class, se_create_class, se_state_class, se_state_color_class, se_fk_id_class, se_error_class;

        if(mobileScreenSize){
                vDomParam = "Bfrtp";
                se_id_show = false;
                se_id_width = "";
                se_id_class = "";
                set_id_show = false;
                set_id_width = "";
                set_id_class = "";
                set_sname_show = true;
                set_sname_width = "60%";
                set_sname_class = "small_size small_head_size small_footer_size head-center";
                se_create_show = true;
                se_create_width = "25%";
                se_create_class = "small_size small_head_size small_footer_size head-center text-center";
                se_state_show = true;
                se_state_width = "15%";
                se_state_class = "small_size small_head_size small_footer_size head-center text-center";
                se_state_color_show = false;
                se_state_color_width = "";
                se_state_color_class = "";
                se_fk_id_show = false;
                se_fk_id_width = "";
                se_fk_id_class = "";
                se_error_show = true;
                se_error_width = "45%";
                se_error_class = "small_size small_head_size small_footer_size head-center";
        }
        else if(smallScreenSize){
                vDomParam = "Bfrtip";
                se_id_show = true;
                se_id_width = "5%";
                se_id_class = "small_size small_head_size small_footer_size head-center";
                set_id_show = true;
                set_id_width = "5%";
                set_id_class = "small_size small_head_size small_footer_size head-center";
                set_sname_show = true;
                set_sname_width = "30%";
                set_sname_class = "small_size small_head_size small_footer_size head-center";
                se_create_show = true;
                se_create_width = "10%";
                se_create_class = "small_size small_head_size small_footer_size head-center text-center";
                se_state_show = true;
                se_state_width = "5%";
                se_state_class = "small_size small_head_size small_footer_size head-center text-center";
                se_state_color_show = false;
                se_state_color_width = "";
                se_state_color_class = "";
                se_fk_id_show = false;
                se_fk_id_width = "";
                se_fk_id_class = "";
                se_error_show = true;
                se_error_width = "45%";
                se_error_class = "small_size small_head_size small_footer_size head-center";
        }
        else{
                vDomParam = "Bfrtip";
                se_id_show = true;
                se_id_width = "5%";
                se_id_class = "small_size small_head_size small_footer_size head-center";
                set_id_show = true;
                set_id_width = "5%";
                set_id_class = "small_size small_head_size small_footer_size head-center";
                set_sname_show = true;
                set_sname_width = "30%";
                set_sname_class = "small_size small_head_size small_footer_size head-center";
                se_create_show = true;
                se_create_width = "10%";
                se_create_class = "small_size small_head_size small_footer_size head-center text-center";
                se_state_show = true;
                se_state_width = "5%";
                se_state_class = "small_size small_head_size small_footer_size head-center text-center";
                se_state_color_show = false;
                se_state_color_width = "";
                se_state_color_class = "";
                se_fk_id_show = false;
                se_fk_id_width = "";
                se_fk_id_class = "";
                se_error_show = true;
                se_error_width = "45%";
                se_error_class = "small_size small_head_size small_footer_size head-center";
        }

        var vAutoTasksValue;
        vAutoTasksValue = {
                table : '#table-auto-tasks',
                ajax : {
                        "url": /*[[@{/auto_tasks/get_main}]]*/ "auto_tasks/get_main",
                        "type": "post",
                        "data": {
                        }
                },
                key : "se_id",
                switchControl : auto_tasks_main_switchControl,
                rowdata:{
                        se_id: null,
                        se_fk_id: null,
                        set_id: null
                },
                ordering: true,
                order: [
                        [0, "desc"]
                ],

                dom: 'Blfrtip',
                createdRow: function( row, data, dataIndex ) {
                        $(row).css('background-color', data["se_state_color"]);
                },
                columnDefs:[
                        {"targets": [0], "width": se_id_width, "className": se_id_class, "visible": se_id_show},
                        {"targets": [1], "width": set_id_width, "className": set_id_class, "visible": set_id_show},
                        {"targets": [2], "width": set_sname_width, "className": set_sname_class, "visible": set_sname_show},
                        {"targets": [3], "width": se_create_width, "className": se_create_class, "visible": se_create_show, type: 'de_datetime'},
                        {"targets": [4], "width": se_state_width, "className": se_state_class, "visible": se_state_show},
                        {"targets": [5], "width": se_state_color_width, "className": se_state_color_class, "visible": se_state_color_show},
                        {"targets": [6], "width": se_fk_id_width, "className": se_fk_id_class, "visible": se_fk_id_show},
                        {"targets": [7], "width": se_error_width, "className": se_error_class, "visible": se_error_show}
                ],
                columns : [
                        /*0*/{"title": /*[[#{auto_tasks.main.se_id}]]*/ "se_id", "data": "se_id"},
                        /*1*/{"title": /*[[#{auto_tasks.main.set_id}]]*/ "set_id", "data": "set_id"},
                        /*2*/{"title": /*[[#{auto_tasks.main.set_sname}]]*/ "set_sname", "data": "set_sname"},
                        /*3*/{"title": /*[[#{auto_tasks.main.se_create}]]*/ "se_create", "data": "se_create"},
                        /*4*/{"title": /*[[#{auto_tasks.main.se_state}]]*/ "se_state", "data": "se_state"},
                        /*5*/{"title": /*[[#{auto_tasks.main.se_state_color}]]*/ "se_state_color", "data": "se_state_color"},
                        /*6*/{"title": /*[[#{auto_tasks.main.se_fk_id}]]*/ "se_fk_id", "data": "se_fk_id"},
                        /*7*/{"title": /*[[#{auto_tasks.main.se_error}]]*/ "se_error", "data": "se_error"}
                ],
                pageLength: 50,
                copy_button: true,
                excel_button: true,
                pdf_button: true,
                print_button: true
        };

        function auto_tasks_main_switchControl(){
                if(vAutoTasksValue.rowdata.se_id != null) {
                        /*
                        if(vAutoTasksValue.rowdata.set_id === 201){
                                $('#finance_file_card').removeAttr('hidden');
                                $('#dk_file_card').prop('hidden',true);
                                vFinaceFileValue.rowdata.sfa_id = vAutoTasksValue.rowdata.se_fk_id;
                                vFinaceFileValue.rowdata.sfad_id = null;
                                $(vFinaceFileValue.table).DataTable().ajax.reload();
                        }
                                else if(vAutoTasksValue.rowdata.set_id === 209){
                                $('#finance_file_card').prop('hidden',true);
                                $('#dk_file_card').removeAttr('hidden');
                                vDKFileValue.rowdata.sfa_id = vAutoTasksValue.rowdata.se_id;
                                vDKFileValue.rowdata.sh_dk_id = null;
                                $(vDKFileValue.table).DataTable().ajax.reload();
                        }
                        else{
                                $('#finance_file_card').prop('hidden',true);
                                $('#dk_file_card').prop('hidden',true);
                        }
                        */
                }else {
                        $('#finance_file_card').prop('hidden',true);
                        vFinaceFileValue.rowdata.sfa_id = null;
                        vFinaceFileValue.rowdata.sfad_id = null;
                        $(vFinaceFileValue.table).DataTable().clear().draw();
                        $('#dk_file_card').prop('hidden',true);
                        vDKFileValue.rowdata.sfa_id = null;
                        vDKFileValue.rowdata.sh_dk_id = null;
                        $(vDKFileValue.table).DataTable().clear().draw();
                }
        }

        $('.auto_tasks_main_btn_control').on('click', function (){
                $("#auto-tasks-main-detail input[name=mode]").val($(this).attr("mode"));
        });

        $('#auto-tasks-main-detail').submit(function() {
                vAutoTasksValue.rowdata.auto_tasks_main_table_order_column = $(vAutoTasksValue.table).DataTable().order()[0][0];
                vAutoTasksValue.rowdata.auto_tasks_main_table_order_type = $(vAutoTasksValue.table).DataTable().order()[0][1];
                vAutoTasksValue.rowdata.auto_tasks_main_table_search = $(vAutoTasksValue.table).DataTable().search();
                vAutoTasksValue.rowdata.auto_tasks_main_table_pagelen = $(vAutoTasksValue.table).DataTable().page.len();
                vAutoTasksValue.rowdata.auto_tasks_main_table_page = $(vAutoTasksValue.table).DataTable().page.info().page;
                <!-- Recreate Contragent Ajax Filter Value -->

                Object.keys(vAutoTasksValue.rowdata).forEach(function (index) {
                        $("#auto-tasks-main-detail").append("<input name=\"" + index + "\" hidden>");
                        $("#auto-tasks-main-detail input[name=\"" + index + "\"]").val(vAutoTasksValue.rowdata[index]);
                });
        });

        $(document).ready(function(){
                vAutoTasksValue.rowdata.se_id = /*[[${se_id}]]*/ null;

                vAutoTasksValue.rowdata.table_order_column = /*[[${table_order_column}]]*/ null;
                vAutoTasksValue.rowdata.table_order_type = /*[[${table_order_type}]]*/ null;
                vAutoTasksValue.rowdata.table_search = /*[[${table_search}]]*/ null;
                vAutoTasksValue.rowdata.table_pagelen = /*[[${table_pagelen}]]*/ null;
                vAutoTasksValue.rowdata.table_page = /*[[${table_page}]]*/ null;

                recreateDataTable(vAutoTasksValue);
                <!-- Highlight menu -->
                $('#main_li').removeClass('active');

                $('#admin_li').addClass('active').removeClass('collapsed');
                $('#admin_a').attr('aria-expanded',true);
                $('#admin').addClass('show');

                $('#auto_tasks_a').addClass('text-primary');
        });
</script>

</body>
</html>