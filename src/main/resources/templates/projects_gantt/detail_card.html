<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<span th:fragment="projects_gantt_detail_body" th:remove="tag">
        <div><table id="table-projects-gantt-detail" class="table table-striped table-sm table-bordered" cellspacing="0" style="width:100%;"></table></div>
</span>

<script th:fragment="cardscript" th:inline="javascript">


    var vProjectsGanttValue;
    vProjectsGanttValue = {
        table : '#table-projects-gantt-detail',
        button_form: "#table-projects-gantt-detail-buttons",
        ajax : {
            "url": /*[[@{/projects_gantt/get_detail_table}]]*/ "projects_gantt/get_detail_table",
            "type": "post",
            "data": {
            }
        },
        key : "rn",
        switchControl : projects_gantt_detail_switchControl,
        rowdata:{
            rn: null,
            pr_id: null
        },
        ordering: true,
        order: [
            [0, "asc"]
        ],

        dom: 'Blfrtip',
        createdRow: function( row, data, dataIndex ) {
            /*$(row).css('background-color', data["act_result_colour"]);*/
        },
        rowCallback: function(row, data, index) {
                    if(data["fin_1_colour"] == '1'){ $(row).find('td:eq(2)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_2_colour"] == '1'){ $(row).find('td:eq(3)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_3_colour"] == '1'){ $(row).find('td:eq(4)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_4_colour"] == '1'){ $(row).find('td:eq(5)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_5_colour"] == '1'){ $(row).find('td:eq(6)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_6_colour"] == '1'){ $(row).find('td:eq(7)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_7_colour"] == '1'){ $(row).find('td:eq(8)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_8_colour"] == '1'){ $(row).find('td:eq(9)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_9_colour"] == '1'){ $(row).find('td:eq(10)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_10_colour"] == '1'){ $(row).find('td:eq(11)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_11_colour"] == '1'){ $(row).find('td:eq(12)').css('background-color', data["pr_status_colour"]);}
                    if(data["fin_12_colour"] == '1'){ $(row).find('td:eq(13)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_13_colour"] == '1'){ $(row).find('td:eq(14)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_14_colour"] == '1'){ $(row).find('td:eq(15)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_15_colour"] == '1'){ $(row).find('td:eq(16)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_16_colour"] == '1'){ $(row).find('td:eq(17)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_17_colour"] == '1'){ $(row).find('td:eq(18)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_18_colour"] == '1'){ $(row).find('td:eq(19)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_19_colour"] == '1'){ $(row).find('td:eq(20)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_20_colour"] == '1'){ $(row).find('td:eq(21)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_21_colour"] == '1'){ $(row).find('td:eq(22)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_22_colour"] == '1'){ $(row).find('td:eq(23)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_23_colour"] == '1'){ $(row).find('td:eq(24)').css('background-color', data["pr_status_colour"]);}
                if(data["fin_24_colour"] == '1'){ $(row).find('td:eq(25)').css('background-color', data["pr_status_colour"]);}
        },
        columnDefs:[
            {"targets": [0], "visible": false},
            {"targets": [1], "visible": false},
            {"targets": [3], "visible": false},
            {"targets": [5], "visible": false},
            {"targets": [6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52],  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53], "visible": false}
        ],
        columns : [
            /*0*/{"title": /*[[#{projects_gantt.detail.rn}]]*/ "rn", "data": "rn"},
            /*1*/{"title": /*[[#{projects_gantt.detail.pr_id}]]*/ "pr_id", "data": "pr_id"},
            /*2*/{"title": /*[[#{projects_gantt.detail.pr_sname}]]*/ "pr_sname", "data": "pr_sname", "width": "22%", "className": "small_size small_head_size small_footer_size"},
            /*3*/{"title": /*[[#{projects_gantt.detail.pr_status_id}]]*/ "pr_status_id", "data": "pr_status_id"},
            /*4*/{"title": /*[[#{projects_gantt.detail.pr_status_sname}]]*/ "pr_status_sname", "data": "pr_status_sname", "width": "6%", "className": "small_size small_head_size small_footer_size text-center"},
            /*5*/{"title": /*[[#{projects_gantt.detail.pr_status_colour}]]*/ "pr_status_colour", "data": "pr_status_colour"},

                /*6*/{"title": /*[[#{month.01_short}]]*/ "fin_1", "data": "fin_1", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*7*/{"title": /*[[#{month.01_short}]]*/ "fin_1_colour", "data": "fin_1_colour"},
                /*8*/{"title": /*[[#{month.02_short}]]*/ "fin_2", "data": "fin_2", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*9*/{"title": /*[[#{month.02_short}]]*/ "fin_2_colour", "data": "fin_2_colour"},
                /*10*/{"title": /*[[#{month.03_short}]]*/ "fin_3", "data": "fin_3", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*11*/{"title": /*[[#{month.03_short}]]*/ "fin_3_colour", "data": "fin_3_colour"},
                /*12*/{"title": /*[[#{month.04_short}]]*/ "fin_4", "data": "fin_4", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*13*/{"title": /*[[#{month.04_short}]]*/ "fin_4_colour", "data": "fin_4_colour"},
                /*14*/{"title": /*[[#{month.05_short}]]*/ "fin_5", "data": "fin_5", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*15*/{"title": /*[[#{month.05_short}]]*/ "fin_5_colour", "data": "fin_5_colour"},
                /*16*/{"title": /*[[#{month.06_short}]]*/ "fin_6", "data": "fin_6", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*17*/{"title": /*[[#{month.06_short}]]*/ "fin_6_colour", "data": "fin_6_colour"},
                /*18*/{"title": /*[[#{month.07_short}]]*/ "fin_7", "data": "fin_7", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*19*/{"title": /*[[#{month.07_short}]]*/ "fin_7_colour", "data": "fin_7_colour"},
                /*20*/{"title": /*[[#{month.08_short}]]*/ "fin_8", "data": "fin_8", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*21*/{"title": /*[[#{month.08_short}]]*/ "fin_8_colour", "data": "fin_8_colour"},
                /*22*/{"title": /*[[#{month.09_short}]]*/ "fin_9", "data": "fin_9", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*23*/{"title": /*[[#{month.09_short}]]*/ "fin_9_colour", "data": "fin_9_colour"},
                /*24*/{"title": /*[[#{month.10_short}]]*/ "fin_10", "data": "fin_10", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*25*/{"title": /*[[#{month.10_short}]]*/ "fin_10_colour", "data": "fin_10_colour"},
                /*26*/{"title": /*[[#{month.11_short}]]*/ "fin_11", "data": "fin_11", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*27*/{"title": /*[[#{month.11_short}]]*/ "fin_11_colour", "data": "fin_11_colour"},
                /*28*/{"title": /*[[#{month.12_short}]]*/ "fin_12", "data": "fin_12", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*29*/{"title": /*[[#{month.12_short}]]*/ "fin_12_colour", "data": "fin_12_colour"},

                /*30*/{"title": /*[[#{month.01_short}]]*/ "fin_13", "data": "fin_13", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*31*/{"title": /*[[#{month.01_short}]]*/ "fin_13_colour", "data": "fin_13_colour"},
                /*32*/{"title": /*[[#{month.02_short}]]*/ "fin_14", "data": "fin_14", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*33*/{"title": /*[[#{month.02_short}]]*/ "fin_14_colour", "data": "fin_14_colour"},
                /*34*/{"title": /*[[#{month.03_short}]]*/ "fin_15", "data": "fin_15", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*35*/{"title": /*[[#{month.03_short}]]*/ "fin_15_colour", "data": "fin_15_colour"},
                /*36*/{"title": /*[[#{month.04_short}]]*/ "fin_16", "data": "fin_16", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*37*/{"title": /*[[#{month.04_short}]]*/ "fin_16_colour", "data": "fin_16_colour"},
                /*38*/{"title": /*[[#{month.05_short}]]*/ "fin_17", "data": "fin_17", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*39*/{"title": /*[[#{month.05_short}]]*/ "fin_17_colour", "data": "fin_17_colour"},
                /*40*/{"title": /*[[#{month.06_short}]]*/ "fin_18", "data": "fin_18", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*41*/{"title": /*[[#{month.06_short}]]*/ "fin_18_colour", "data": "fin_18_colour"},
                /*42*/{"title": /*[[#{month.07_short}]]*/ "fin_19", "data": "fin_19", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*43*/{"title": /*[[#{month.07_short}]]*/ "fin_19_colour", "data": "fin_19_colour"},
                /*44*/{"title": /*[[#{month.08_short}]]*/ "fin_20", "data": "fin_20", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*45*/{"title": /*[[#{month.08_short}]]*/ "fin_20_colour", "data": "fin_20_colour"},
                /*46*/{"title": /*[[#{month.09_short}]]*/ "fin_21", "data": "fin_21", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*47*/{"title": /*[[#{month.09_short}]]*/ "fin_21_colour", "data": "fin_21_colour"},
                /*48*/{"title": /*[[#{month.10_short}]]*/ "fin_22", "data": "fin_22", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*49*/{"title": /*[[#{month.10_short}]]*/ "fin_22_colour", "data": "fin_22_colour"},
                /*50*/{"title": /*[[#{month.11_short}]]*/ "fin_23", "data": "fin_23", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*51*/{"title": /*[[#{month.11_short}]]*/ "fin_23_colour", "data": "fin_23_colour"},
                /*52*/{"title": /*[[#{month.12_short}]]*/ "fin_24", "data": "fin_24", "width": "3%", "className": "small_size small_head_size small_footer_size text-center"},
                /*53*/{"title": /*[[#{month.12_short}]]*/ "fin_24_colour", "data": "fin_24_colour"}
        ],
        pageLength: 25,
        copy_button: true,
        excel_button: true,
        pdf_button: true,
        print_button: true
    };

    function projects_gantt_detail_switchControl(){
            if(vProjectsGanttValue.rowdata.pr_id != null) {
                    $('#projects_gantt_stages_div').removeAttr('hidden');
                    vProjectsGanttStagesValue.rowdata.parent_pr_id = vProjectsGanttValue.rowdata.pr_id;
                    $(vProjectsGanttStagesValue.table).DataTable().ajax.reload();
            } else{
                    $('#projects_gantt_stages_div').attr('hidden', true);
                    vProjectsGanttStagesValue.rowdata.parent_pr_id = null;
                    $(vProjectsGanttStagesValue.table).DataTable().clear().draw();
            }
    }

    $('.positions_btn_control').on('click', function (){
        $("#positions-detail input[name=mode]").val($(this).attr("mode"));
    });

    $(document).ready(function(){
        recreateDataTable(vProjectsGanttValue);

         $("#table-projects-gantt-detail thead tr:first").before(
                    '<tr role="row">' +
                    '<th colspan="2"></th>' +
                    '<th colspan="12" class="text-center">2019</th>' +
                    '<th colspan="12" class="text-center">2020</th>' +
                    '</tr>');
    });
</script>

</body>
</html>