<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<span th:fragment="wms_report_1_main_body" th:remove="tag">
    <form id="table-wms-report-1-main-buttons" hidden>
        <input name="mode" value="0" hidden>
        <button type="button" id="wms-report-1-main-reloadbtn" class="btn btn-primary mr-2" data-toggle="tooltip" data-placement="bottom" th:title="#{general.refreshbtn}"><i class="fa fa-sync"></i></button>
    </form>

    <div><table id="table-wms-report-1-main" class="table table-striped table-sm table-bordered" cellspacing="0" style="width:100%;"></table></div>
</span>

<script th:fragment="cardscript" th:inline="javascript">

    var row_id_show, cnt_id_show, cnt_name_show, add_date_show, add_date_name_show, add_date_check_id_show, client_orders_show, client_docs_show, client_post_count_show,
        client_not_send_count_show, doc_count_show, doc_post_count_show, doc_not_work_show, doc_post_not_work_show, doc_post_day_avg_time_show, doc_day_avg_time_show,
        start_time_show, end_time_show, work_time_show, pair_count_show, pair_hour_show, pair_post_count_check_show;

    var row_id_width, cnt_id_width, cnt_name_width, add_date_width, add_date_name_width, add_date_check_id_width, client_orders_width, client_docs_width,
        client_post_count_width, client_not_send_count_width, doc_count_width, doc_post_count_width, doc_not_work_width, doc_post_not_work_width, doc_post_day_avg_time_width,
        doc_day_avg_time_width, start_time_width, end_time_width, work_time_width, pair_count_width, pair_hour_width, pair_post_count_check_width;

    var row_id_class, cnt_id_class, cnt_name_class, add_date_class, add_date_name_class, add_date_check_id_class, client_orders_class, client_docs_class,
        client_post_count_class, client_not_send_count_class, doc_count_class, doc_post_count_class, doc_not_work_class, doc_post_not_work_class, doc_post_day_avg_time_class,
        doc_day_avg_time_class, start_time_class, end_time_class, work_time_class, pair_count_class, pair_hour_class, pair_post_count_check_class;

    if(mobileScreenSize){
        vDomParam =
            "<'row'<'col-12'B>>"+
            "<'row'<'col-12 col-sm-3'l><'col-12 col-sm-9'f>>"+
            "<'row'<'col-12'tr>>" +
            "<'row'<'col-12'p>>";

        row_id_show = false;
        row_id_width = "";
        row_id_class = "";
        cnt_id_show = false;
        cnt_id_width = "";
        cnt_id_class = "";
        cnt_name_show = false;
        cnt_name_width = "";
        cnt_name_class = "";
        add_date_show = false;
        add_date_width = "";
        add_date_class = "";
        add_date_name_show = false;
        add_date_name_class = "";
        add_date_name_width = "";
        add_date_check_id_show = false;
        add_date_check_id_class = "";
        add_date_check_id_width = "";
        client_orders_show = false;
        client_orders_width = "";
        client_orders_class = "";
        client_docs_show = false;
        client_docs_width = "";
        client_docs_class = "";
        client_post_count_show = false;
        client_post_count_width = "";
        client_post_count_class = "";
        client_not_send_count_show = false;
        client_not_send_count_width = "";
        client_not_send_count_class = "";
        doc_count_show = false;
        doc_count_width = "";
        doc_count_class = "";
        doc_post_count_show = false;
        doc_post_count_width = "";
        doc_post_count_class = "";
        doc_not_work_show = false;
        doc_not_work_width = "";
        doc_not_work_class = "";
        doc_post_not_work_show = false;
        doc_post_not_work_width = "";
        doc_post_not_work_class = "";
        pair_count_show = false;
        pair_count_width = "";
        pair_count_class = "";
        pair_hour_show = false;
        pair_hour_width = "";
        pair_hour_class = "";
        doc_post_day_avg_time_show = false;
        doc_post_day_avg_time_width = "";
        doc_post_day_avg_time_class = "";
        doc_day_avg_time_show = false;
        doc_day_avg_time_width = "";
        doc_day_avg_time_class = "";
        start_time_show = false;
        start_time_width = "";
        start_time_class = "";
        end_time_show = false;
        end_time_width = "";
        end_time_class = "";
        work_time_show = false;
        work_time_width = "";
        work_time_class = "";
        pair_post_count_check_show = false;
        pair_post_count_check_width = "";
        pair_post_count_check_class = "";

        $('#wms-report-1-main-detail').addClass('text-center').removeAttr('hidden');
    }
    else if(smallScreenSize){
        vDomParam = "Blfrtip";
        row_id_show = false;
        row_id_width = "";
        row_id_class = "";
        cnt_id_show = false;
        cnt_id_width = "";
        cnt_id_class = "";
        cnt_name_show = true;
        cnt_name_width = "13%";
        cnt_name_class = "head-center cell-light-grey head-light-grey head-text-primary";
        add_date_show = true;
        add_date_width = "5%";
        add_date_class = "text-center head-center head-light-grey head-text-primary";
        add_date_name_show = true;
        add_date_name_width = "3%";
        add_date_name_class = "text-center head-center head-light-grey head-text-primary";
        add_date_check_id_show = false;
        add_date_check_id_width = "";
        add_date_check_id_class = "";
        client_orders_show = true;
        client_orders_width = "5%";
        client_orders_class = "head-center cell-light-grey  head-light-grey head-text-primary";
        client_docs_show = true;
        client_docs_width = "5%";
        client_docs_class = "head-center head-light-grey head-text-primary";
        client_post_count_show = true;
        client_post_count_width = "5%";
        client_post_count_class = "head-center cell-light-grey head-light-grey head-text-primary";
        client_not_send_count_show = true;
        client_not_send_count_width = "5%";
        client_not_send_count_class = "head-center head-light-grey head-text-primary";
        doc_count_show = true;
        doc_count_width = "5%";
        doc_count_class = "head-center cell-light-grey head-light-grey head-text-primary";
        doc_post_count_show = true;
        doc_post_count_width = "5%";
        doc_post_count_class = "head-center head-light-grey head-text-primary";
        doc_not_work_show = false;
        doc_not_work_width = "";
        doc_not_work_class = "";
        doc_not_work_show = false;
        doc_not_work_width = "";
        doc_not_work_class = "";
        doc_post_not_work_show = false;
        doc_post_not_work_width = "";
        doc_post_not_work_class = "";
        pair_count_show = true;
        pair_count_width = "6%";
        pair_count_class = "head-center cell-light-grey head-light-grey head-text-primary";
        pair_hour_show = true;
        pair_hour_width = "6%";
        pair_hour_class = "head-center head-light-grey head-text-primary";
        doc_post_day_avg_time_show = true;
        doc_post_day_avg_time_width = "6%";
        doc_post_day_avg_time_class = "text-center cell-light-grey head-light-grey head-text-primary";
        doc_day_avg_time_show = true;
        doc_day_avg_time_width = "6%";
        doc_day_avg_time_class = "text-center head-center head-light-grey head-text-primary";
        start_time_show = true;
        start_time_width = "5%";
        start_time_class = "text-center cell-light-grey head-center head-light-grey head-text-primary";
        end_time_show = true;
        end_time_width = "5%";
        end_time_class = "text-center head-center head-light-grey head-text-primary";
        work_time_show = true;
        work_time_width = "5%";
        work_time_class = "text-center cell-light-grey head-center head-light-grey head-text-primary";
        pair_post_count_check_show = false;
        pair_post_count_check_width = "";
        pair_post_count_check_class = "";

        $('#wms-report-1-main-detail').removeAttr('hidden');
    }
    else{
        vDomParam = "Blfrtip";
        row_id_show = false;
        row_id_width = "";
        row_id_class = "";
        cnt_id_show = false;
        cnt_id_width = "";
        cnt_id_class = "";
        cnt_name_show = true;
        cnt_name_width = "13%";
        cnt_name_class = "head-center cell-light-grey head-light-grey head-text-primary";
        add_date_show = true;
        add_date_width = "5%";
        add_date_class = "text-center head-center head-light-grey head-text-primary";
        add_date_name_show = true;
        add_date_name_width = "3%";
        add_date_name_class = "text-center head-center head-light-grey head-text-primary";
        add_date_check_id_show = false;
        add_date_check_id_width = "";
        add_date_check_id_class = "";
        client_orders_show = true;
        client_orders_width = "5%";
        client_orders_class = "head-center cell-light-grey  head-light-grey head-text-primary";
        client_docs_show = true;
        client_docs_width = "5%";
        client_docs_class = "head-center head-light-grey head-text-primary";
        client_post_count_show = true;
        client_post_count_width = "5%";
        client_post_count_class = "head-center cell-light-grey head-light-grey head-text-primary";
        client_not_send_count_show = true;
        client_not_send_count_width = "5%";
        client_not_send_count_class = "head-center head-light-grey head-text-primary";
        doc_count_show = true;
        doc_count_width = "5%";
        doc_count_class = "head-center cell-light-grey head-light-grey head-text-primary";
        doc_post_count_show = true;
        doc_post_count_width = "5%";
        doc_post_count_class = "head-center head-light-grey head-text-primary";
        doc_not_work_show = false;
        doc_not_work_width = "";
        doc_not_work_class = "";
        doc_not_work_show = false;
        doc_not_work_width = "";
        doc_not_work_class = "";
        doc_post_not_work_show = false;
        doc_post_not_work_width = "";
        doc_post_not_work_class = "";
        pair_count_show = true;
        pair_count_width = "6%";
        pair_count_class = "head-center cell-light-grey head-light-grey head-text-primary";
        pair_hour_show = true;
        pair_hour_width = "6%";
        pair_hour_class = "head-center head-light-grey head-text-primary";
        doc_post_day_avg_time_show = true;
        doc_post_day_avg_time_width = "6%";
        doc_post_day_avg_time_class = "text-center cell-light-grey head-light-grey head-text-primary";
        doc_day_avg_time_show = true;
        doc_day_avg_time_width = "6%";
        doc_day_avg_time_class = "text-center head-center head-light-grey head-text-primary";
        start_time_show = true;
        start_time_width = "5%";
        start_time_class = "text-center cell-light-grey head-center head-light-grey head-text-primary";
        end_time_show = true;
        end_time_width = "5%";
        end_time_class = "text-center head-center head-light-grey head-text-primary";
        work_time_show = true;
        work_time_width = "5%";
        work_time_class = "text-center cell-light-grey head-center head-light-grey head-text-primary";
        pair_post_count_check_show = false;
        pair_post_count_check_width = "";
        pair_post_count_check_class = "";
    }

    var vWMSSaleDocsMainValue;
    vWMSSaleDocsMainValue = {
        table : '#table-wms-report-1-main',
        header : 'table-wms-report-1-main-header',
        button_form: (mobileScreenSize) ? null : "#table-wms-report-1-main-buttons",
        ajax : {
            "url": /*[[@{/wms_report_1/get_menu}]]*/ "wms_report_1/get_menu",
            "type": "post",
            "data": function ( d ) {
                d.wms_report_1_main_filter_id = vWMSSaleDocsMainValue.rowdata.wms_report_1_main_filter_id;
                d.wms_report_1_main_filter_start_date = vWMSSaleDocsMainValue.rowdata.wms_report_1_main_filter_start_date;
                d.wms_report_1_main_filter_end_date = vWMSSaleDocsMainValue.rowdata.wms_report_1_main_filter_end_date;
            }
        },
        key : "row_id",
        switchControl : wms_report_1_main_switchControl,
        rowdata:{
            row_id: null,

            cnt_id: null,
            cnt_name: null,
            status_id: null,

            wms_report_1_main_filter_id: null,
            wms_report_1_main_filter_start_date: null,
            wms_report_1_main_filter_end_date: null
        },
        order: [
            [3, "desc"]
        ],
        dom: vDomParam,
        createdRow: function( row, data, dataIndex ) {
            if ( data.pair_post_count_check === -1 ) {
                $(row).find('td:eq(8)').css('background-color', '#ff8566');
            }
            else if ( data.pair_post_count_check === 1 ) {
                $(row).find('td:eq(8)').css('background-color', 'rgb(181,231,160)');
            }

            if(parseInt(data.client_not_send_count,0) <= 0 ){
                $(row).find('td:eq(6)').css('background-color', 'rgb(181,231,160)');
            }

            if(data.add_date_check_id === 1){
                $(row).find('td:eq(2)').addClass('font-weight-bold text-success').removeClass('font-weight-bold text-danger');
            }
            else{
                $(row).find('td:eq(2)').removeClass('font-weight-bold text-success').addClass('font-weight-bold text-danger');
            }
        },
        columnDefs:[
            {"targets": [0], "width": row_id_width, "className": row_id_class, "visible": row_id_show},
            {"targets": [1], "width": cnt_id_width, "className": cnt_id_class, "visible": cnt_id_show},
            {"targets": [2], "width": cnt_name_width, "className": cnt_name_class, "visible": cnt_name_show},
            {"targets": [3], "width": add_date_width, "className": add_date_class, "visible": add_date_show, type: 'de_date'},
            {"targets": [4], "width": add_date_name_width, "className": add_date_name_class, "visible": add_date_name_show},
            {"targets": [5], "width": add_date_check_id_width, "className": add_date_check_id_class, "visible": add_date_check_id_show},
            {"targets": [6], "width": client_orders_width, "className": client_orders_class, "visible": client_orders_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [7], "width": client_docs_width, "className": client_docs_class, "visible": client_docs_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [8], "width": client_post_count_width, "className": client_post_count_class, "visible": client_post_count_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [9], "width": client_not_send_count_width, "className": client_not_send_count_class, "visible": client_not_send_count_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [10], "width": doc_count_width, "className": doc_count_class, "visible": doc_count_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [11], "width": doc_post_count_width, "className": doc_post_count_class, "visible": doc_post_count_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [12], "width": doc_not_work_width, "className": doc_not_work_class, "visible": doc_not_work_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [13], "width": doc_post_not_work_width, "className": doc_post_not_work_class, "visible": doc_post_not_work_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [14], "width": pair_count_width, "className": pair_count_class, "visible": pair_count_show,  render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )},
            {"targets": [15], "width": pair_hour_width, "className": pair_hour_class, "visible": pair_hour_show},
            {"targets": [16], "width": doc_post_day_avg_time_width, "className": doc_post_day_avg_time_class, "visible": doc_post_day_avg_time_show},
            {"targets": [17], "width": doc_day_avg_time_width, "className": doc_day_avg_time_class, "visible": doc_day_avg_time_show},
            {"targets": [18], "width": start_time_width, "className": start_time_class, "visible": start_time_show},
            {"targets": [19], "width": end_time_width, "className": end_time_class, "visible": end_time_show},
            {"targets": [20], "width": work_time_width, "className": work_time_class, "visible": work_time_show},
            {"targets": [21], "width": pair_post_count_check_width, "className": pair_post_count_check_class, "visible": pair_post_count_check_show}
        ],
        columns : [
            /*0*/{"title": /*[[#{wms_report_1.main.row_id}]]*/ "row_id", "data": "row_id"},
            /*1*/{"title": /*[[#{wms_report_1.main.cnt_id}]]*/ "cnt_id", "data": "cnt_id"},
            /*2*/{"title": /*[[#{wms_report_1.main.cnt_name}]]*/ "cnt_name", "data": "cnt_name"},
            /*3*/{"title": /*[[#{wms_report_1.main.add_date}]]*/ "add_date", "data": "add_date"},
            /*4*/{"title": /*[[#{wms_report_1.main.add_date_name}]]*/ "add_date_name", "data": "add_date_name"},
            /*5*/{"title": /*[[#{wms_report_1.main.add_date_check_id}]]*/ "add_date_check_id", "data": "add_date_check_id"},
            /*6*/{"title": /*[[#{wms_report_1.main.client_orders}]]*/ "client_orders", "data": "client_orders"},
            /*7*/{"title": /*[[#{wms_report_1.main.client_docs}]]*/ "client_docs", "data": "client_docs"},
            /*8*/{"title": /*[[#{wms_report_1.main.client_post_count}]]*/ "client_post_count", "data": "client_post_count"},
            /*9*/{"title": /*[[#{wms_report_1.main.client_not_send_count}]]*/ "client_not_send_count", "data": "client_not_send_count"},
            /*10*/{"title": /*[[#{wms_report_1.main.doc_count}]]*/ "doc_count", "data": "doc_count"},
            /*11*/{"title": /*[[#{wms_report_1.main.doc_post_count}]]*/ "doc_post_count", "data": "doc_post_count"},
            /*12*/{"title": /*[[#{wms_report_1.main.doc_not_work}]]*/ "doc_not_work", "data": "doc_not_work"},
            /*13*/{"title": /*[[#{wms_report_1.main.doc_post_not_work}]]*/ "doc_post_not_work", "data": "doc_post_not_work"},
            /*14*/{"title": /*[[#{wms_report_1.main.pair_count}]]*/ "pair_count", "data": "pair_count"},
            /*15*/{"title": /*[[#{wms_report_1.main.pair_hour}]]*/ "pair_hour", "data": "pair_hour"},

            /*16*/{"title": /*[[#{wms_report_1.main.doc_post_day_avg_time}]]*/ "doc_post_day_avg_time", "data": "doc_post_day_avg_time"},
            /*17*/{"title": /*[[#{wms_report_1.main.doc_day_avg_time}]]*/ "doc_day_avg_time", "data": "doc_day_avg_time"},
            /*18*/{"title": /*[[#{wms_report_1.main.start_time}]]*/ "start_time", "data": "start_time"},
            /*19*/{"title": /*[[#{wms_report_1.main.end_time}]]*/ "end_time", "data": "end_time"},
            /*20*/{"title": /*[[#{wms_report_1.main.work_time}]]*/ "work_time", "data": "work_time"},
            /*21*/{"title": /*[[#{wms_report_1.main.pair_post_count_check}]]*/ "pair_post_count_check", "data": "pair_post_count_check"}
        ],
        pageLength: 25,
        copy_button: true,
        excel_button: true,
        pdf_button: true,
        print_button: true
    };

    function wms_report_1_main_switchControl(){
        if(vWMSSaleDocsMainValue.rowdata.row_id != null) {
            $('#wms-report-1-main-detailbtn').prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
            $('#wms-report-1-main-editbtn').prop('disabled', false).removeClass('btn-dark').addClass('btn-primary');
            $('#wms-report-1-main-delbtn').prop('disabled', false).removeClass('btn-dark').addClass('btn-danger');
        }
        else{
            $('#wms-report-1-main-detailbtn').prop('disabled', true).addClass('btn-dark').removeClass('btn-primary');
            $('#wms-report-1-main-editbtn').prop('disabled', true).addClass('btn-dark').removeClass('btn-primary');
            $('#wms-report-1-main-delbtn').prop('disabled', true).addClass('btn-dark').removeClass('btn-danger');
        }
    }
//Reload Function
    function reloadWmsReport1Main(){
        vWMSSaleDocsMainValue.rowdata.wms_report_1_main_filter_id = $('#wms_report_1_main_filter_id').val();
        vWMSSaleDocsMainValue.rowdata.wms_report_1_main_filter_start_date = $('#wms_report_1_main_filter_start_date').val();
        vWMSSaleDocsMainValue.rowdata.wms_report_1_main_filter_end_date = $('#wms_report_1_main_filter_end_date').val();

        $(vWMSSaleDocsMainValue.table).DataTable().ajax.reload(null, false);
    }
//Reload button
    $('#wms-report-1-main-reloadbtn').click(function() {
        reloadWmsReport1Main();
    });
</script>

</body>
</html>