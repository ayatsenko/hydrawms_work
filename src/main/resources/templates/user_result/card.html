<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.thymeleaf.org ">
<body>
<span th:fragment="user_result_body" th:remove="tag">
            <form id="table-user-result-link-form" th:action="@{/report_employee_balance}" method="post" target="_blank">
                <input name="user_id" hidden>
                <input name="employee_balance_show_id" hidden>
                <input name="employee_balance_start_date" hidden>
                <input name="employee_balance_end_date" hidden>
                <input name="employee_tab_id" hidden>
            </form>

        <div><table id="table-user-result" class="table table-striped table-sm table-bordered" cellspacing="0" style="width:100%;"></table></div>
</span>

<script th:fragment="cardscript" th:inline="javascript">
    var currYear = new Date().getFullYear();
    var currMonth = new Date().getMonth();

    var user_id_width, user_name_width, user_surname_width, fin_1_width, fin_1_color_width, fin_2_width, fin_2_color_width, fin_3_width, fin_3_color_width, fin_4_width, fin_4_color_width,
        fin_5_width, fin_5_color_width, fin_6_width, fin_6_color_width, fin_7_width, fin_7_color_width, fin_8_width, fin_8_color_width, fin_9_width, fin_9_color_width,
        fin_10_width, fin_10_color_width, fin_11_width, fin_11_color_width, fin_12_width, fin_12_color_width, fin_all_width, fin_all_color_width;

    var user_id_class, user_name_class, user_surname_class, fin_1_class, fin_1_color_class, fin_2_class, fin_2_color_class, fin_3_class, fin_3_color_class, fin_4_class, fin_4_color_class,
        fin_5_class, fin_5_color_class, fin_6_class, fin_6_color_class, fin_7_class, fin_7_color_class, fin_8_class, fin_8_color_class, fin_9_class, fin_9_color_class,
        fin_10_class, fin_10_color_class, fin_11_class, fin_11_color_class, fin_12_class, fin_12_color_class, fin_all_class, fin_all_color_class;

    var smallScreenSize = window.screen.width > 1024 && window.screen.height <= 768;
    var mobileScreenSize = window.screen.width < 1024 && window.screen.height < 768;

    if(mobileScreenSize){
        vDomParam = "ftp";
        user_id_width = "";
        user_id_class = "none";
        user_name_width = "";
        user_name_class = "none";
        user_surname_width = "22%";
        user_surname_class = "small_size small_head_size small_footer_size user_name";
        if (currMonth + 1 === 1) {
            fin_1_width = "6%";
            fin_1_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 1 > 0 && currMonth + 1 - 1 < 5){
            fin_1_width = "6%";
            fin_1_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
            }
        else{
            fin_1_width = "";
            fin_1_class = "none";
        }
        fin_1_color_width = "";
        fin_1_color_class = "none";
        if (currMonth + 1 === 2) {
            fin_2_width = "6%";
            fin_2_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 2 > 0 && currMonth + 1 - 2 < 5){
            fin_2_width = "6%";
            fin_2_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_2_width = "";
            fin_2_class = "none";
        }
        fin_2_color_width = "";
        fin_2_color_class = "none";
        if (currMonth + 1 === 3) {
            fin_3_width = "6%";
            fin_3_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 3 > 0 && currMonth + 1 - 3 < 5){
            fin_3_width = "6%";
            fin_3_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_3_width = "";
            fin_3_class = "none";
        }
        fin_3_color_width = "";
        fin_3_color_class = "none";
        if (currMonth + 1 === 4) {
            fin_4_width = "6%";
            fin_4_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 4 > 0 && currMonth + 1 - 4 < 5){
            fin_4_width = "6%";
            fin_4_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_4_width = "";
            fin_4_class = "none";
        }
        fin_4_color_width = "";
        fin_4_color_class = "none";
        if (currMonth + 1 === 5) {
            fin_5_width = "6%";
            fin_5_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 5 > 0 && currMonth + 1 - 5 < 5){
            fin_5_width = "6%";
            fin_5_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_5_width = "";
            fin_5_class = "none";
        }
        fin_5_color_width = "";
        fin_5_color_class = "none";
        if (currMonth + 1 === 6) {
            fin_6_width = "6%";
            fin_6_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 6 > 0 && currMonth + 1 - 6 < 5){
            fin_6_width = "6%";
            fin_6_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_6_width = "";
            fin_6_class = "none";
        }
        fin_6_color_width = "";
        fin_6_color_class = "none";
        if (currMonth + 1 === 7) {
            fin_7_width = "6%";
            fin_7_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 7 > 0 && currMonth + 1 - 7 < 5){
            fin_7_width = "6%";
            fin_7_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_7_width = "";
            fin_7_class = "none";
        }
        fin_7_color_width = "";
        fin_7_color_class = "none";
        if (currMonth + 1 === 8) {
            fin_8_width = "6%";
            fin_8_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 8 > 0 && currMonth + 1 - 8 < 5){
            fin_8_width = "6%";
            fin_8_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_8_width = "";
            fin_8_class = "none";
        }
        fin_8_color_width = "";
        fin_8_color_class = "none";
        if (currMonth + 1 === 9) {
            fin_9_width = "6%";
            fin_9_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 9 > 0 && currMonth + 1 - 9 < 5){
            fin_9_width = "6%";
            fin_9_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_9_width = "";
            fin_9_class = "none";
        }
        fin_9_color_width = "";
        fin_9_color_class = "none";
        if (currMonth + 1 === 10) {
            fin_10_width = "6%";
            fin_10_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 10 > 0 && currMonth + 1 - 10 < 5){
            fin_10_width = "6%";
            fin_10_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_10_width = "";
            fin_10_class = "none";
        }
        fin_10_color_width = "";
        fin_10_color_class = "none";
        if (currMonth + 1 === 11) {
            fin_11_width = "6%";
            fin_11_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 11 > 0 && currMonth + 1 - 11 < 5){
            fin_11_width = "6%";
            fin_11_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_11_width = "";
            fin_11_class = "none";
        }
        fin_11_color_width = "";
        fin_11_color_class = "none";
        if (currMonth + 1 === 12) {
            fin_12_width = "6%";
            fin_12_class = "all text-center small_size small_head_size small_footer_size finance";
        }
        else if (currMonth + 1 - 12 > 0 && currMonth + 1 - 12 < 5){
            fin_12_width = "6%";
            fin_12_class = "tablet-p text-center small_size small_head_size small_footer_size finance";
        }
        else{
            fin_12_width = "";
            fin_12_class = "none";
        }
        fin_12_color_width = "";
        fin_12_color_class = "none";
        fin_all_width = "6%";
        fin_all_class = "all text-center small_size small_head_size small_footer_size finance";
        fin_all_color_width = "";
        fin_all_color_class = "none";
    }
    else if(smallScreenSize){
        vDomParam = "ftp";
        user_id_width = "";
        user_id_class = "none";
        user_name_width = "";
        user_name_class = "none";
        user_surname_width = "22%";
        user_surname_class = "small_size small_head_size small_footer_size user_name";
        fin_1_width = "6%";
        fin_1_class = "text-center small_size small_head_size small_footer_size finance";
        fin_1_color_width = "";
        fin_1_color_class = "none";
        fin_2_width = "6%";
        fin_2_class = "text-center small_size small_head_size small_footer_size finance";
        fin_2_color_width = "";
        fin_2_color_class = "none";
        fin_3_width = "6%";
        fin_3_class = "text-center small_size small_head_size small_footer_size finance";
        fin_3_color_width = "";
        fin_3_color_class = "none";
        fin_4_width = "6%";
        fin_4_class = "text-center small_size small_head_size small_footer_size finance";
        fin_4_color_width = "";
        fin_4_color_class = "none";
        fin_5_width = "6%";
        fin_5_class = "text-center small_size small_head_size small_footer_size finance";
        fin_5_color_width = "";
        fin_5_color_class = "none";
        fin_6_width = "6%";
        fin_6_class = "text-center small_size small_head_size small_footer_size finance";
        fin_6_color_width = "";
        fin_6_color_class = "none";
        fin_7_width = "6%";
        fin_7_class = "text-center small_size small_head_size small_footer_size finance";
        fin_7_color_width = "";
        fin_7_color_class = "none";
        fin_8_width = "6%";
        fin_8_class = "text-center small_size small_head_size small_footer_size finance";
        fin_8_color_width = "";
        fin_8_color_class = "none";
        fin_9_width = "6%";
        fin_9_class = "text-center small_size small_head_size small_footer_size finance";
        fin_9_color_width = "";
        fin_9_color_class = "none";
        fin_10_width = "6%";
        fin_10_class = "text-center small_size small_head_size small_footer_size finance";
        fin_10_color_width = "";
        fin_10_color_class = "none";
        fin_11_width = "6%";
        fin_11_class = "text-center small_size small_head_size small_footer_size finance";
        fin_11_color_width = "";
        fin_11_color_class = "none";
        fin_12_width = "6%";
        fin_12_class = "text-center small_size small_head_size small_footer_size finance";
        fin_12_color_width = "";
        fin_12_color_class = "none";
        fin_all_width = "6%";
        fin_all_class = "text-center small_size small_head_size small_footer_size finance";
        fin_all_color_width = "";
        fin_all_color_class = "none";
    }
    else{
        vDomParam = "ftp";

        user_id_width = "";
        user_id_class = "none";
        user_name_width = "";
        user_name_class = "none";
        user_surname_width = "22%";
        user_surname_class = "cnt_shift";
        fin_1_width = "6%";
        fin_1_class = "text-center finance";
        fin_1_color_width = "";
        fin_1_color_class = "none";
        fin_2_width = "6%";
        fin_2_class = "text-center finance";
        fin_2_color_width = "";
        fin_2_color_class = "none";
        fin_3_width = "6%";
        fin_3_class = "text-center finance";
        fin_3_color_width = "";
        fin_3_color_class = "none";
        fin_4_width = "6%";
        fin_4_class = "text-center finance";
        fin_4_color_width = "";
        fin_4_color_class = "none";
        fin_5_width = "6%";
        fin_5_class = "text-center finance";
        fin_5_color_width = "";
        fin_5_color_class = "none";
        fin_6_width = "6%";
        fin_6_class = "text-center finance";
        fin_6_color_width = "";
        fin_6_color_class = "none";
        fin_7_width = "6%";
        fin_7_class = "text-center finance";
        fin_7_color_width = "";
        fin_7_color_class = "none";
        fin_8_width = "6%";
        fin_8_class = "text-center finance";
        fin_8_color_width = "";
        fin_8_color_class = "none";
        fin_9_width = "6%";
        fin_9_class = "text-center finance";
        fin_9_color_width = "";
        fin_9_color_class = "none";
        fin_10_width = "6%";
        fin_10_class = "text-center finance";
        fin_10_color_width = "";
        fin_10_color_class = "none";
        fin_11_width = "6%";
        fin_11_class = "text-center finance";
        fin_11_color_width = "";
        fin_11_color_class = "none";
        fin_12_width = "6%";
        fin_12_class = "text-center finance";
        fin_12_color_width = "";
        fin_12_color_class = "none";
        fin_all_width = "6%";
        fin_all_class = "text-center finance";
        fin_all_color_width = "";
        fin_all_color_class = "none";
    }

    var vUserResultValue = {
            table : '#table-user-result',
            button_form: '#user_result_filter_div',
            ajax : {
                    "url": /*[[@{/get_user_result}]]*/ "/get_user_result",
                    "type": "post",
                    "data": function ( d ) {
                            d.year = vUserResultValue.rowdata.year
                    }
            },
            key : "user_id",
            switchControl : user_result_switchControl,
            rowdata: {
                    user_id: null,
                    year: null,
                    month: null,

                    user_result_table_order_column: null,
                    user_result_table_order_type: null,
                    user_result_table_search: null,
                    user_result_table_pagelen: null,
                    user_result_table_page: null
            },
            ordering: true,
            order: [
                    [0, "desc"]
            ],
            scrollX: false,
            dom: 'ftp',
            createdRow: function( row, data, dataIndex ) {
                $(row).find('td:eq(3)').css('background-color', data["fin_1_color"]);
                $(row).find('td:eq(5)').css('background-color', data["fin_2_color"]);
                $(row).find('td:eq(7)').css('background-color', data["fin_3_color"]);
                $(row).find('td:eq(9)').css('background-color', data["fin_4_color"]);
                $(row).find('td:eq(11)').css('background-color', data["fin_5_color"]);
                $(row).find('td:eq(13)').css('background-color', data["fin_6_color"]);
                $(row).find('td:eq(15)').css('background-color', data["fin_7_color"]);
                $(row).find('td:eq(17)').css('background-color', data["fin_8_color"]);
                $(row).find('td:eq(19)').css('background-color', data["fin_9_color"]);
                $(row).find('td:eq(21)').css('background-color', data["fin_10_color"]);
                $(row).find('td:eq(23)').css('background-color', data["fin_11_color"]);
                $(row).find('td:eq(25)').css('background-color', data["fin_12_color"]);
                $(row).find('td:eq(27)').css('background-color', data["fin_all_color"]);
            },
            columnDefs: [
                    { "targets": [3,5,7,9,11,13,15,17,19,21,23,25,27], render: $.fn.dataTable.render.number( '\ ', '.', 0, '' )}
            ],
            columns : [
                /*0*/{"title": /*[[#{mainpage.userresult.user_id}]]*/ "user_id", "data": "user_id", "width": user_id_width, "className": user_id_class},
                /*1*/{"title": /*[[#{mainpage.userresult.user_name}]]*/ "user_name", "data": "user_name", "width": user_name_width, "className": user_name_class},
                /*2*/{"title": /*[[#{mainpage.userresult.user_surname}]]*/ "user_surname", "data": "user_surname", "width": user_surname_width, "className": user_surname_class},
                /*3*/{"title": /*[[#{month.01_short}]]*/ "fin_1", "data": "fin_1", "width": fin_1_width, "className": fin_1_class},
                /*4*/{"title": /*[[#{month.01_short}]]*/ "fin_1_color", "data": "fin_1_color", "width": fin_1_color_width, "className": fin_1_color_class},
                /*5*/{"title": /*[[#{month.02_short}]]*/ "fin_2", "data": "fin_2", "width": fin_2_width, "className": fin_2_class},
                /*6*/{"title": /*[[#{month.02_short}]]*/ "fin_2_color", "data": "fin_2_color", "width": fin_2_color_width, "className": fin_2_color_class},
                /*7*/{"title": /*[[#{month.03_short}]]*/ "fin_3", "data": "fin_3", "width": fin_3_width, "className": fin_3_class},
                /*8*/{"title": /*[[#{month.03_short}]]*/ "fin_3_color", "data": "fin_3_color", "width": fin_3_color_width, "className": fin_3_color_class},
                /*9*/{"title": /*[[#{month.04_short}]]*/ "fin_4", "data": "fin_4", "width": fin_4_width, "className": fin_4_class},
                /*10*/{"title": /*[[#{month.04_short}]]*/ "fin_4_color", "data": "fin_4_color", "width": fin_4_color_width, "className": fin_4_color_class},
                /*11*/{"title": /*[[#{month.05_short}]]*/ "fin_5", "data": "fin_5", "width": fin_5_width, "className": fin_5_class},
                /*12*/{"title": /*[[#{month.05_short}]]*/ "fin_5_color", "data": "fin_5_color", "width": fin_5_color_width, "className": fin_5_color_class},
                /*13*/{"title": /*[[#{month.06_short}]]*/ "fin_6", "data": "fin_6", "width": fin_6_width, "className": fin_6_class},
                /*14*/{"title": /*[[#{month.06_short}]]*/ "fin_6_color", "data": "fin_6_color", "width": fin_6_color_width, "className": fin_6_color_class},
                /*15*/{"title": /*[[#{month.07_short}]]*/ "fin_7", "data": "fin_7", "width": fin_7_width, "className": fin_7_class},
                /*16*/{"title": /*[[#{month.07_short}]]*/ "fin_7_color", "data": "fin_7_color", "width": fin_7_color_width, "className": fin_7_color_class},
                /*17*/{"title": /*[[#{month.08_short}]]*/ "fin_8", "data": "fin_8", "width": fin_8_width, "className": fin_8_class},
                /*18*/{"title": /*[[#{month.08_short}]]*/ "fin_8_color", "data": "fin_8_color", "width": fin_8_color_width, "className": fin_8_color_class},
                /*19*/{"title": /*[[#{month.09_short}]]*/ "fin_9", "data": "fin_9", "width": fin_9_width, "className": fin_9_class},
                /*20*/{"title": /*[[#{month.09_short}]]*/ "fin_9_color", "data": "fin_9_color", "width": fin_9_color_width, "className": fin_9_color_class},
                /*21*/{"title": /*[[#{month.10_short}]]*/ "fin_10", "data": "fin_10", "width": fin_10_width, "className": fin_10_class},
                /*22*/{"title": /*[[#{month.10_short}]]*/ "fin_10_color", "data": "fin_10_color", "width": fin_10_color_width, "className": fin_10_color_class},
                /*23*/{"title": /*[[#{month.11_short}]]*/ "fin_11", "data": "fin_11", "width": fin_11_width, "className": fin_11_class},
                /*24*/{"title": /*[[#{month.11_short}]]*/ "fin_11_color", "data": "fin_11_color", "width": fin_11_color_width, "className": fin_11_color_class},
                /*25*/{"title": /*[[#{month.12_short}]]*/ "fin_12", "data": "fin_12", "width": fin_12_width, "className": fin_12_class},
                /*26*/{"title": /*[[#{month.12_short}]]*/ "fin_12_color", "data": "fin_12_color", "width": fin_12_color_width, "className": fin_12_color_class},
                /*27*/{"title": /*[[#{mainpage.userresult.fin_all}]]*/ "fin_all", "data": "fin_all", "width": fin_all_width, "className": fin_all_class},
                /*28*/{"title": /*[[#{mainpage.userresult.fin_all}]]*/ "fin_all_color", "data": "fin_all_color", "width": fin_all_color_width, "className": fin_all_color_class}
            ],
                pageLength: 25,
                copy_button: true,
                excel_button: true,
                pdf_button: true,
                print_button: true
        };

        function user_result_switchControl(){
        }

    $('#table-user-result').on('dblclick', '.finance', function (e) {
            var selectedRow = this._DT_CellIndex.row;
            var currentTable = $('#table-user-result').DataTable();
            var firstYearDay = new Date(new Date().getFullYear(), 0, 1).toLocaleDateString('ru');
            var LastYearDay = new Date(new Date().getFullYear(), 11, 31).toLocaleDateString('ru');

            $("#table-user-result-link-form input[name=user_id]").val(currentTable.row(selectedRow).data().user_id);

            $("#table-user-result-link-form input[name=employee_balance_show_id]").val(1);
            $("#table-user-result-link-form input[name=employee_balance_start_date]").val(firstYearDay);
            $("#table-user-result-link-form input[name=employee_balance_end_date]").val(LastYearDay);
            $("#table-user-result-link-form input[name=employee_tab_id]").val(2);
            $("#table-user-result-link-form").submit();
    });

        $('[id=user_result_year]').val(currYear);

        $(document).ready(function() {
                vUserResultValue.rowdata.user_id = /*[[${user_id}]]*/ null;
                vUserResultValue.rowdata.year = $('#user_result_year').val();

                recreateDataTable( vUserResultValue );
            <!-- Hihglight menu -->
        });

    <!-- User Result Table -->
    $('#user_result_year').change( function (){
            vUserResultValue.rowdata.user_id = /*[[${user_id}]]*/ null;
            vUserResultValue.rowdata.year = $('#user_result_year').val();
            $(vUserResultValue.table).DataTable().ajax.reload();
    });
</script>

</body>
</html>